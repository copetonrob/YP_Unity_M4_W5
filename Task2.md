# Задание 2: Пауза!

## Описание

В этом задании мы сделаем паузу в игре. Наша пауза будет достаточно примитивной и будет выполнена базовыми средствами Unity. Более сложную и продуманную паузу, необходимо прописывать самостоятельно. Механика работы паузы: При нажатии на клавишу Esc, открывается мини меню с двумя кнопками (Продолжить, Выход). При повторном нажатии на Esc, окно паузы закрывается.

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/Task2.gif" width="600"/>

В этом задании мы сделаем паузу при помощи [Time.scaleTime](https://docs.unity3d.com/ScriptReference/Time-timeScale.html)

Почитайте документацию. Это глобальный параметр, который указывает с какой скоростью идет внутреннее время в игре. Когда он равен 1, то время идет как обычно. Если он равен 0.5, то мы получим эффект замедления в два раза. Если он равен 2, то игра ускорится в два раза. Если выставить Time.scaleTime = 0, то мы получим эффект паузы. 

## Что происходит в игре во время этой паузы?

- Time.deltatime домножается на этот коэффициент и поэтому во всех кадрах будет равен нулю. 

- Time.time перестает увеличиваться. 

- Методы FixedUpdate перестают вызываться.

- Методы Update продолжают вызываться.

- Time.unscaledDeltaTime по прежнему будет равно времени между кадрами, так как это значение не модифицируется коэффициентом.

Что все это значит? Это значит, что такой паузой вы остановите в игре все процессы, которые завязаны на Time.deltaTime и на физических вычислениях. Но не остановите процессы, которые не привязаны ко времени или привязаны к Time.unscaledDeltaTime. В этом утверждении гораздо больше мудрости, чем может показаться на первый взгляд =)

## Инструкция

В этом задании у нас будет один большой и сложный скрипт [Pause.cs](https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/scripts/Pause.cs)

Внимательно изучи его и попробуй понять, что он делает.

Этот скрипт состоит из трех частей.

Первая часть - это объявление полей. Часть из них для прокидывания ссылок на панель меню и тексты с таймерами. Часть для внутренней работы скрипта.

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/pause_1.png" width="600"/>

Вторая часть - это Update() и то, что происходит каждый кадр. Этот код выполняется вне зависимости от того, стоит ли игра на паузе в данный момент или нет. Единственное, что происходит во время паузы, что Time.deltaTime становится равно нулю.

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/pause_2.png" width="600"/>

Третья часть - это методы для обработки нажатия на кнопки меню и клавишу Esc

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/pause_3.png" width="600"/>

Создай меню паузы с двумя кнопками. По кнопку "Продолжить", меню закроется и игра продолжится. По кнопке Выход, мы снимаем игру с паузы и переходим в сцену главного меню.

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/scene_view.png" width="600"/>

*Это важный момент! Параметр Time.scaleTime глобальный и при переходе между сценами он сохраняет свое значение. Поэтому если вы в одной сцене сделали его равным нулю, то при переходе на другую сцену, вы можете удивиться, что игра не работает, но на самом деле она просто так и осталась на паузе Time.scaleTime = 0; Поэтому в скрипте мы перед переходом на сцену главного меню возвращаем значение Time.scaleTime = 1;*

Не забудь отключить объект с меню паузы, чтобы скрыть его до первого нажатия "Esc"

Создай в канвасе два текста для отображения таймеров. В одном таймере мы будем отсчитывать время, которое модифицируется Time.scaleTime, а в другом, которое не модифицируется

Создай пустой объект в сцене и навесь на него скрипт Pause. Добавь ссылки на тексты таймеров и панель с меню паузы.

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/Pause_controller.png" width="600"/>

Не забудь указать обработчики для каждой кнопки, добавив соответствующие методы

<img src="https://github.com/copetonrob/YP_Unity_M4_W5/blob/main/img/PauseOnClick.png" width="600"/>

Учтите, если у вас в игре есть код, который не зависит от времени. Например, если в Update при нажатии на кнопку, спаунится пуля из оружия, то во время паузы все снаряды будут так же появляться как обычно, но никуда не будут лететь. После того как вы отожмете паузу, то снаряды резко оживут все вместе. Поэтому если у вас множество сложной логики в игре, то лучше сделать дополнительный флаг для паузы и проверять его при выполнении отдельных фрагментов кода. Или хотя бы проверять значение Time.timeScale на ноль. Или отключать отдельные компоненты во время паузы.

Запустите сцену и проверьте, что все работает. Обратите внимание, что при нажатии на паузу, один таймер перестает идти, а второй продолжает.